local Players = game:GetService("Players")
local player = Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")

local green = player:WaitForChild("PlayerGui")
	:WaitForChild("Main")
	:WaitForChild("CatchingBar")
	:WaitForChild("Frame")
	:WaitForChild("Bar")
	:WaitForChild("Catch")
	:WaitForChild("Green")

local gui = Instance.new("ScreenGui")
gui.Name = "FillBarGui"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local button = Instance.new("TextButton")
button.Size = UDim2.fromOffset(80, 30)
button.Position = UDim2.fromScale(0.5, 0.6)
button.AnchorPoint = Vector2.new(0.5, 0.5)
button.Text = "Fill Bar"
button.TextSize = 18
button.BackgroundColor3 = Color3.fromRGB(170, 40, 40)
button.TextColor3 = Color3.fromRGB(255, 255, 255)
button.Parent = gui

local dragging = false
local dragStart, startPos

button.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1
	or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = button.Position
	end
end)

button.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1
	or input.UserInputType == Enum.UserInputType.Touch then
		dragging = false
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if dragging and (
		input.UserInputType == Enum.UserInputType.MouseMovement
		or input.UserInputType == Enum.UserInputType.Touch
	) then
		local delta = input.Position - dragStart
		button.Position = UDim2.new(
			startPos.X.Scale,
			startPos.X.Offset + delta.X,
			startPos.Y.Scale,
			startPos.Y.Offset + delta.Y
		)
	end
end)

local running = false

button.MouseButton1Click:Connect(function()
	running = not running

	if running then
		button.BackgroundColor3 = Color3.fromRGB(40, 170, 40)
		task.spawn(function()
			while running do
				if green.Size ~= UDim2.new(0.7,0,1,0) then
					green.Size = UDim2.new(0.7,0,1,0)
				end
				task.wait()
			end
		end)
	else
		button.BackgroundColor3 = Color3.fromRGB(170, 40, 40)
	end
end)
